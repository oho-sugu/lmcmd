# lmcmd

`lmcmd`は、ローカルで動作する大規模言語モデル (LLM) を利用したコマンドラインツールです。`awk`や`sed`のように、標準入力から受け取ったテキストをLLMで処理し、その結果を標準出力へ出力します。

-----

## 使い方

`lmcmd`は、以下の形式で実行します。

```bash
cat input.txt | python lmcmd.py "[プロンプト]"
```

`[プロンプト]`には、標準入力から受け取るテキストに対する命令を記述します。`lmcmd`は入力の各行をプロンプトの一部としてLLMに渡し、生成された応答を1行ずつ標準出力へ出力します。

コンテキストは各行で共有しないので、その行だけで完結する処理しか正しくできません。

現行バージョンはテスト用に「元の文字列 >> 生成文字列」のように出力しています。

-----

## 利用例

### 日本語を英語に翻訳する

入力テキストを英語に翻訳したい場合、以下のようにプロンプトを記述します。

```bash
$ echo "こんにちは、世界" | python lmcmd.py "以下の日本語を英語に翻訳してください："
こんにちは、世界 >> Hello, world
```

### 冗長な文章を要約する

長文を簡潔にしたい場合、要約のプロンプトを使います。

```bash
$ echo "空は青く澄んでおり、太陽の光が地面を明るく照らしていた。鳥たちは楽しげにさえずり、木々の葉は風に揺れていた。" | python lmcmd.py "以下の文章を10文字以内で要約してください："
空は青く澄んでおり、太陽の光が地面を明るく照らしていた。鳥たちは楽しげにさえずり、木々の葉は風に揺れていた。 >> 青空で鳥歌う
```

### JSON形式のデータを整形する

JSONデータを行ごとに処理することも可能です。

```bash
$ echo '{"name": "Alice", "age": 30}' | python lmcmd.py "以下のJSONデータからnameの値だけを抽出してください："
{"name": "Alice", "age": 30} >> Alice
```

### 日本語の人名を抜き出す

文字列中から人名を抜き出します。

```bash
$ cat testdata.txt | python lmcmd.py "日本語の人名を抜き出しなさい。"
本日は晴天なり。 >>
太郎と花子がおにぎりを食べています。 >> 太郎, 花子
```

### ユーザーレビューのポジネガ判定

ユーザーレビューの羅列のファイルを与えて、PositiveかNegativeかを判定させます。

```bash
$ cat testreview.txt | python lmcmd.py "レビューをポジティブとネガティブに分類してください。"
この製品は最高です。素晴らしい。これを使い始めてから人生が楽しくお金がもうかり彼女もできました。 >> Positive
最悪、バグだらけ。もう絶対買わない。 >> ネガティブ
まぁ普通。 >> ネガティブ
```

-----

## 動作環境

  * **ローカルLLM**: `lmcmd`は、ローカルでLLMが動作している環境が必要です。`LM Studio`の`openai/gpt-oss-20b`で動作確認しています。LM Studioのインストールやモデルの設定などは公式などの情報を参照してください。
  * **Python**: Python 3.13で動作確認しています。
  * **依存ライブラリ**: [lmstudio-python](https://lmstudio.ai/docs/python)を使います。`pip install lmstudio`でインストールしてください。

-----

## 開発と貢献

とりあえず試しに作ってみたものです。無保証です。
